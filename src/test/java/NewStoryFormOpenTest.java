import dao.Backlog;
import dao.Story;
import stories.NewStoryController;
import stories.NewStoryNanny;
import stories.NewStoryPanel;

import javax.swing.*;

/**
 * Simply tests if the form opens, and if after creating a story, it is actually created (story info is in the terminal)
 *
 * @author Jonathan Garcia
 * @version 2.0
 */

public class NewStoryFormOpenTest {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(() -> {

            Backlog backlog = new Backlog();
            NewStoryNanny nanny = new NewStoryNanny();

            JFrame f = new JFrame("Quick New Story Test");
            f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

            Runnable onSuccess = () -> {
                Story s = backlog.get(backlog.size() - 1);

                System.out.println("STORY CREATED");
                System.out.println("ID: " + s.getID());
                System.out.println("Title: " + s.getTitle());
                System.out.println("Description: " + s.getDescription());
                System.out.println("Points: " + s.getPoints());
                System.out.println("Status: " + s.getStatus());
                System.out.println("Priority: " + s.getPriority());
                System.out.println("");
            };


            Runnable onCancel = f::dispose;

            NewStoryPanel panel = new NewStoryPanel();
            NewStoryController.connect(panel, nanny, backlog, onSuccess, onCancel);

            f.setContentPane(panel);
            f.setSize(800, 800);
            f.setLocationRelativeTo(null);
            f.setVisible(true);
        });
    }
}
